# Shell ?
맥os는 유닉스로 만들어짐. 유닉스 리눅스 두 OS는 뿌리가 같음 


`$pwd`  
현재 디렉토리 위치
<br/>
<br/>


```shell
$ls [옵션] [파일/디렉토리]
```
list  
`$ls`  : 현 디렉토리의 목록 출력  
`$ls -p` : 디렉토리 뒤에만 '/'출력  
`$ls -l` : -long  
파일권한(drwxr/xr/x/r 등), 생성 날짜 등 파일에 대한 자세한 정보를 출력  
(d(디렉토리), l(링크파일), -(기타))  
파일권한  
파일 링크수  
소유자  
그룹정보  
파일크기Byte  
최근 수정 된 날짜 및 시간 : 6개월 이상 경과시 년도만.  
파일 이름  
`$ls -la` or `$ls -al` : ls -a 명령어와 ls -l 명령어를 동시에 사용한 효과입니다. 따라서 숨긴파일까지 모두 조회하되 파일 권한, 크기 등 모든 데이터를 출력  
|옵션|설명|
|--|--|
|-a|(all)숨겨진 파일이나 디렉토리도 보여준다.|
|||
|-l|(long) 자세한 내용을 출력한다. 퍼미션(권한), 포함된 파일수, 소유자, 그룹, 파일크기, 수정일자, 파일이름|
|||
|-m|콤마로 구분하여 출력한다.|
|||
|-p|디렉토리에 /를 추가한다.|
|||
|-t|파일이 수정된 시간 기준으로 정렬하여 출력한다. |
|||
|-u|-lt와 같이 사용시 생성시간 기준으로 출력하고 -l과 사용시 생성시간 출력하고 이름순으로 출력한다. |  

[참고](https://akdl911215.tistory.com/201)    

<br/>
<br/>

* 파일 권한, 퍼미션 정보  


change mode  

ex) rwxr-xr-x  
r(읽기 권한), w(쓰기 권한), x(실행 권한)  
3자씩 끊어서  
소유자( rwx ), 그룹( r-x ), 공개 로 구성( r-x )  

`chmod [변경될 퍼미션값] [변경할 파일]` : 펴미션 값( 숫자 3자리 )은 r=4, w=2, x=1 각 자리수마다 권한의 합을 입력  
:또는 
|구분|기호|설명|
|--|--|--|
|접근권한(퍼미션)|r|읽기|
||w|쓰기|
||x|실행|
|수행할 연산|+|권한 추가|
||-|권한 제거|
||=|권한 부여|
|사용자|u|user의 약자, 소유자|
||g|group의 약자, 그룹|
||o|other의 약자, 일반 사용자|
||a|all의 약자, 모든 사용자|
|| |문자가 없으면 'a'와 동일하게 적용|  

ex) ug+x, g-x, +x, u=rx, u-w, g+r, o+x


<br/>
<br/>


`$mkdir 디렉토리명` : make directory, 디렉토리 생성 

<br/>
<br/>

`$cd  ` : change directory.  
`$cd ..` :  
`$cd [경로] ` :

<br/>
<br/>

`$rmdir [디렉토리명]` : 디렉토리 삭제, 해당 디렉토리가 비어있어야함. 


<br/>
<br/>


`echo [option] [string]` : 텍스트나 문자열 출력  
`echo abc` or `echo "abc"` : abc 출력  


<br/>
<br/>

`$cat [옵션] [파일명]` :  
`$cat [파일명]` : 파일을 실행한 결과를 출력 ex) cat test.txt
- 옵션
  - -b: 줄번호를 화면 왼쪽에 나타낸다. 비어있는 행은 제외한다.  
-e: 제어 문자를 ^ 형태로 출력하면서 각 행의 끝에 $를 추가한다.  
-n: 줄번호를 화면 왼쪽에 나타낸다. 비어있는 행도 포함한다.  
-s: 연속되는 2개이상의 빈 행을 한행으로 출력한다.  
-v: tab과 행 바꿈 문자를 제외한 제어 문자를 ^ 형태로 출력한다.  
-E: 행마다 끝에 $ 문자를 출력한다.  
-T: 탭(tab) 문자를 출력한다.  
-A: -vET 옵션을 사용한 것과 같은 효과를 본다.  

`$cat > [새 파일명]` : 파일 생성 Ctrl+d로 나옴.  
`$cat [파일명1] [파일명2] > [새 파일명]` :  
`$cat [파일명2] >> [파일명1]` : 파일명1 에 파일명2 붙혀넣기

<br/>
<br/>

`$touch [파일명]` :  
리눅스에는 세종류의 타임스탬프가 있음.
- atime : 최종 접근 시간 (access time)
- ctime : 최종 상태 변경 시간 (change time)
- mtime : 최종 수정 시간 (modify time)  

별다른 옵션이 없으면 현재시간으로 모두 수정.  

`$touch -t  [YYYYMMDDhhmm.SS(년월일시간분.초)] [파일명]` : $touch -t 202009221045.30 files  
해당 시간으로 수정.  


[첨고](http://www.incodom.kr/Linux/%EA%B8%B0%EB%B3%B8%EB%AA%85%EB%A0%B9%EC%96%B4/touch)  

<br/>
<br/>

> 변수 선언  

`$[변수명]=[값]` : 임의의 변수명을 선언하고 값을 넣는다.   
`$echo $[변수명]` : 해당 변수의 값을 출력
  
`$env` : 현재 환경 변수표시, 위 구문으로 선언한 변수는 환경변수에 저장되지 않음. 

`$export [변수명]` : 해당 변수명(+값)을 환경변수에 저장.  

<br/>
<br/>

> 메타문자, 특수기호

: 쉘에 특정한 문자.  
`$wc [파일명]` : 해당파일에 행, 단어, 문자수를 셈  
  : -l 라인수, -w 단어수, -c 문자수  
`$wc [파일명.txt] [파일명2.txt]` == `$wc *.txt`  
`$echo *.txt`  
`$echo t*.txt`  
`$echo t???.txt`  
`$echo ~`  
`$echo \*` : echo명령어로 특수기호를 출력하기위해서, "", ''로 표현도 가능  
`$echo '$변수 *'` : $변수 *  
`$echo "$변수 *"` : 값 *  



|특수 문자|사전 정의|
|--:|--|
|~|홈 디렉토리|
|.|현재 디렉토리|
|..|상위 디렉토리|
|#|주석|
|$|쉘 변수|
|&|백그라운드(background) 작업|
|*|문자열 와일드카드(wildcard)|
|?|한 문자 와일드 카드|
|[]|문자의 범위를 지정|
|;|쉘 명령구분자|
|\||파이프|
<br/>
<br/>

> 파일 조작

`$more [파일명]` : 파일 내용이 길때, 페이지단위로 보여줌   
  : /[표현식] 으로 표현식에 해당하는 문자열 찾기  
  종료는 q or Q ,  다음페이지 f, 이전페이지 b, vi 에디터 v, 

`$head [옵션] [파일명] [파일명]` : 해당 파일명의 옵션에 만족하는 결과를 출력  
`$tail [옵션] [파일명] [파일명]` :  
|옵션|설명|
|--|--|
|-n num|num 수만큼 출력|
|-c num|num byte만큼 출력|
|-q|여러개의 파일을 출력할 때 제목을 출력하지 않음|
|-f|내용이 변경될 때마다 실시간으로 출력해줌. 로그파일 모니터릴 등에 활용. (tail만 )|

`$grep [옵션] [패턴] [파일명]` : 패턴에 해당하는 라인을 출력   
`$grep nike sho.txt` : nike에 해당하는 라인출력  
`$grep -v nike sho.txt` : nike에 해당하지 않는 라인출력  
`$grep -i NikE sho.txt` : 대소문자 무시  


<br/>
<br/>

> 입출력  

stdin >> **cat** >> stdout (정상)  >> stdin >> grep  
　　　　　　>> stderr (오류) >> *error.log*

stdin >> **grep** >> stdout  
　　　　　　>> stderr  

`$ls | grep txt` : 목록중 txt에 해당하는것들만
`$ls > res.txt` : 목록결과를 res.txt를 생성해 기입

리다이렉션 입출력  
\>, >>, < 파일 하나입력, << (ex << FIN : FIN이 입력될때까지 계속입력)  


<br/>
<br/>

> 고급 쉘 기능  


`$find .` : 현재 디렉토리 이하 모든 파일들의 전체 경로 표시  
`$find . -maxdepth ` : maxdepth 가 1이하 인, 현 디렉토리의 파일들을 표시  


`$bc` : 계산기 , 변수 로 계산 ok, 종료 quit  


<br/>
<br/>

> 압축  

`$tar [옵션] [파일]` :  
`$tar -cf a.tar a1 a2` : a1, a2 파일을 c,f 옵션으로 a.tar에 압축  
|옵션|설명|
|--|--|
|-f|대상 tar 아카이브 지정 (기본옵션)|
|-c|tar 아카이브 생성, 기존 아카이브 덮어쓰기. (파일 묶을 때 사용)|


[참고](https://recipes4dev.tistory.com/146)


<br/>
<br/>

> 링크  


우리가 아는 파일링크(바로가기키)같은 형식이 리눅스의 **심볼릭 링크** 와 **하드 링크**  
심볼릭 링크 : 단순히 원본 파일을 가리키도록 링크만 연결 시켜둔 것으로 , 윈도우의 바로가기파일 같은, 원본파일의 크기와 무관, 원본 삭제되면 링크파일이 깜박거리며 원본이 없다고 알려줌  

`$ln [옵션] [원본파일] [대상파일]`:  
`$ln -s [원본 파일] [심볼릭링크 이름]` : 심볼릭링크 이름 -> 원본파일 이름  / 원본으로 실행(이동)하는 링크파일 생성  

`$touch -h [링크이름]` : 심볼릭 링크 타임스탬프 수정  
`$touch -h -t [시간] [링크이름]` : 심볼릭 링크 타임 스탬프 수정   

하드 링크 :  
`$ln [원본파일] [하드링크파일]` : 

기타 옵션 등  
[참고](https://server-talk.tistory.com/140)  [심볼릭 링크와 하드링크](https://mrrootable.tistory.com/37)  


<br/>
<br/>

> kerberos 티켓 확인  
:  커비로스(케르베로스) == 인증   장? 단? 왜 사용?  
* 동일관리 도메인에서 인증 서버를 사용하는 개체 인증 프로토콜   
* 두가지 기능 수행 (1. 상호인증, 2. 세션키 설정)  

실생활) 푸트코트에서 음식을 먹을 때 
1. 사람은 계산대에서 음식B요금을 지불 (-> 개선, 먼저 TGT(Ticket for Granting Ticket, 표를 승인하는 표)를 구매한다.(인증) 기간1개월이내 ) 
2. 계산대는 사람에게 음식 B에 해당하는 티켓을 줌  (-> 개선, TGT가 있으면 기간 이내에 다른코너의 음식도 제공받을 수 있음(더이상의 인증 필요 X) 
3. 사람은 음식B 티켓으로 B코너에 음식 요청(서비스요청) 
4. B코너는 음식B(서비스)을 만들어서 사람에게 제공

* 커버로스는 두 개의 신뢰하는 서버가 존재한다. 
  - AS(인증서버), KDC(키분배서버)
  - AS와 KDC는 TTP(Trusted Third Party)의 역할을 담당한다. 
  - TTP는 항상 신뢰할 수 있으며, 따라서 이것이 훼손되어서는 안된다. 
* AS<--대칭키(K A)공유-->Alice(유저) , AS<--대칭키(K B)공유-->Bob(유저)
* KDC 는 마스터키(K KDC) 갖고있음, AS만 이 키를 알고 있다. 

<img width="471" alt="Screen Shot 2021-10-06 at 1 41 00 PM" src="https://user-images.githubusercontent.com/83233720/136141723-6f44970b-eab7-457c-8981-99bd23550ad2.png">  

<img width="465" alt="Screen Shot 2021-10-06 at 1 46 05 PM" src="https://user-images.githubusercontent.com/83233720/136142090-9312afa5-3a19-4588-992f-ea29ffed3db6.png">  

<img width="462" alt="Screen Shot 2021-10-06 at 1 48 50 PM" src="https://user-images.githubusercontent.com/83233720/136142271-392cbb0d-566c-48b6-b12d-c0752cf0a28c.png">

kerberos Tickets
* AS는 Ticket-granting Tickets(TGTs)을 발행한다. 
  - TGT는 클라이언트를 인증한 후에 망 자원에 접근할 수 있는 Ticket을 얻는데 사용된다. 
* TGT 에는 다음의 정보가 포함된다. 
  - 비밀키(Secret key) - 세션키 아님
  - 사용자 ID
  - 유효기간
* 모든 TGT는 K kdc로 암호화 되어 전송된다.
  - 따라서 오직 KDC 만이 TGT를 읽을 수 있다. 
* 요청이 오면, KDC는 망에 접근할 수 있는 Ticket을 발행한다. 

+ AS 와 KDC는 기능의 측면에서 구분한 것이고, 실제 운용은 동일 서버에서 수행 될 수 있다. 

[참고 블로그](https://juneyr.dev/2018-10-31/kerberos)  


`$/usr/bin/klist -t` : klist 명령을 -f 옵션과 함께 사용하면 사용자가 보유한 티켓과 이러한 티켓의 속성을 확인 할 수 있음. 






<br/>
<br/>

# 단축키 
`Ctrl+L` : 화면 지우는 단축키   
`Tap` : 디렉토리 내에 일치하는 파일/디렉토리명으로 바로 입력  
`ctrl+d` , `ctrl+c`, `ctrl+\` : 정상종료, 강제종료,  (  ? 종료 )  
`ctrl+k` : 커서뒤 잘라내기 


<br/>
<br/>
<br/>
<br/>

# 기타 
- 디렉토리 생성시 '.', '..' 두개의 숨김폴더가 생성   
: 현재디렉토리, 상위 디렉토리를 의미 


[참고(shell00)](https://2pound2pound.tistory.com/294)
